{
  "_meta": {
    "version": "3.0",
    "last_updated": "2026-01-27",
    "description": "Systeme de ciblage multi-grilles (2x5, 3x5, 4x5)"
  },

  "grids": {
    "_comment": "Configurations de grilles disponibles",
    
    "2x5": {
      "rows": 2,
      "cols": 5,
      "total_slots": 10,
      "rows_names": ["front", "back"],
      "slot_mapping": {
        "front": [0, 1, 2, 3, 4],
        "back": [5, 6, 7, 8, 9]
      }
    },
    
    "3x5": {
      "rows": 3,
      "cols": 5,
      "total_slots": 15,
      "rows_names": ["front", "mid", "back"],
      "slot_mapping": {
        "front": [0, 1, 2, 3, 4],
        "mid": [5, 6, 7, 8, 9],
        "back": [10, 11, 12, 13, 14]
      }
    },

    "4x5": {
      "rows": 4,
      "cols": 5,
      "total_slots": 20,
      "rows_names": ["front", "mid_front", "mid_back", "back"],
      "slot_mapping": {
        "front": [0, 1, 2, 3, 4],
        "mid_front": [5, 6, 7, 8, 9],
        "mid_back": [10, 11, 12, 13, 14],
        "back": [15, 16, 17, 18, 19]
      }
    }
  },

  "line_of_sight": {
    "description": "Systeme de ligne de vue",
    "core_rule": "Une cible est bloquee si elle a une unite DEVANT ELLE dans sa propre grille",
    "rules": {
      "auto_attack": {
        "needs_los": true,
        "description": "Auto-attacks bloquees si la cible a quelqu'un devant dans sa colonne"
      },
      "spells": {
        "default": false,
        "description": "Par defaut les spells ignorent LoS (needs_los sur le spell pour forcer)"
      }
    }
  },

  "patterns": {
    "_comment": "Patterns utilisant offsets relatifs [row, col]. S'adaptent a la grille active.",
    
    "single": {
      "name": "Single Target",
      "category": "basic",
      "tiles": [[0, 0]],
      "needs_los": true
    },

    "row_3": {
      "name": "Row 3",
      "description": "3 cases horizontales centrees",
      "category": "line",
      "tiles": [[0, -1], [0, 0], [0, 1]],
      "needs_los": false
    },
    "row_5": {
      "name": "Row Full (5)",
      "description": "Ligne complete 5 cases",
      "category": "line",
      "tiles": [[0, -2], [0, -1], [0, 0], [0, 1], [0, 2]],
      "needs_los": false
    },
    "row_all": {
      "name": "Row All",
      "description": "Toute la ligne (s'adapte a la grille)",
      "category": "line",
      "tiles": "row",
      "needs_los": false
    },

    "col_2": {
      "name": "Column 2",
      "description": "2 cases verticales",
      "category": "line",
      "tiles": [[0, 0], [1, 0]],
      "needs_los": false
    },
    "col_3": {
      "name": "Column 3",
      "description": "3 cases verticales",
      "category": "line",
      "tiles": [[-1, 0], [0, 0], [1, 0]],
      "needs_los": false
    },
    "col_4": {
      "name": "Column 4",
      "description": "4 cases verticales",
      "category": "line",
      "tiles": [[-1, 0], [0, 0], [1, 0], [2, 0]],
      "needs_los": false
    },
    "col_all": {
      "name": "Column All",
      "description": "Toute la colonne (s'adapte a la grille)",
      "category": "line",
      "tiles": "column",
      "needs_los": false
    },

    "adjacent": {
      "name": "Adjacent (Cross)",
      "description": "Cible + 4 adjacents cardinaux",
      "category": "area",
      "tiles": [[0, 0], [0, -1], [0, 1], [-1, 0], [1, 0]],
      "needs_los": false
    },
    "adjacent_8": {
      "name": "Adjacent 8",
      "description": "Cible + 8 cases autour",
      "category": "area",
      "tiles": [
        [-1, -1], [-1, 0], [-1, 1],
        [0, -1], [0, 0], [0, 1],
        [1, -1], [1, 0], [1, 1]
      ],
      "needs_los": false
    },

    "rect_2x2": {
      "name": "Rect 2x2",
      "category": "area",
      "tiles": [[0, 0], [0, 1], [1, 0], [1, 1]],
      "needs_los": false
    },
    "rect_2x3": {
      "name": "Rect 2x3",
      "category": "area",
      "tiles": [[0, -1], [0, 0], [0, 1], [1, -1], [1, 0], [1, 1]],
      "needs_los": false
    },
    "rect_3x3": {
      "name": "Rect 3x3",
      "category": "area",
      "tiles": [
        [-1, -1], [-1, 0], [-1, 1],
        [0, -1], [0, 0], [0, 1],
        [1, -1], [1, 0], [1, 1]
      ],
      "needs_los": false
    },

    "cross": {
      "name": "Cross",
      "description": "Croix (centre + lignes verticale/horizontale)",
      "category": "special",
      "tiles": [
        [-2, 0], [-1, 0], [0, 0], [1, 0], [2, 0],
        [0, -2], [0, -1], [0, 1], [0, 2]
      ],
      "needs_los": false
    },
    
    "diagonal_down": {
      "name": "Diagonal \\",
      "category": "diagonal",
      "tiles": [[0, 0], [1, 1], [2, 2], [3, 3]],
      "needs_los": false
    },
    "diagonal_up": {
      "name": "Diagonal /",
      "category": "diagonal",
      "tiles": [[0, 0], [1, -1], [2, -2], [3, -3]],
      "needs_los": false
    },

    "chain_2": {
      "name": "Chain 2",
      "description": "Rebondit sur 2 cibles adjacentes",
      "category": "chain",
      "tiles": "dynamic",
      "bounces": 2,
      "bounce_damage_reduction": 0.15,
      "needs_los": true
    },
    "chain_3": {
      "name": "Chain 3",
      "description": "Rebondit sur 3 cibles adjacentes",
      "category": "chain",
      "tiles": "dynamic",
      "bounces": 3,
      "bounce_damage_reduction": 0.15,
      "needs_los": true
    },
    "chain_4": {
      "name": "Chain 4",
      "description": "Rebondit sur 4 cibles adjacentes",
      "category": "chain",
      "tiles": "dynamic",
      "bounces": 4,
      "bounce_damage_reduction": 0.15,
      "needs_los": true
    },

    "random_2": {
      "name": "Random 2",
      "category": "random",
      "tiles": "dynamic",
      "random_targets": 2,
      "needs_los": false
    },
    "random_3": {
      "name": "Random 3",
      "category": "random",
      "tiles": "dynamic",
      "random_targets": 3,
      "needs_los": false
    },
    "random_4": {
      "name": "Random 4",
      "category": "random",
      "tiles": "dynamic",
      "random_targets": 4,
      "needs_los": false
    },

    "all": {
      "name": "All",
      "description": "Toutes les cibles de la grille",
      "category": "basic",
      "tiles": "all",
      "needs_los": false
    },

    "front_row": {
      "name": "Front Row",
      "description": "Premiere ligne (row 0)",
      "category": "positional",
      "tiles": "front_row",
      "fixed_row": 0,
      "needs_los": false
    },
    "back_row": {
      "name": "Back Row",
      "description": "Derniere ligne",
      "category": "positional",
      "tiles": "back_row",
      "fixed_row": -1,
      "needs_los": false
    },

    "ring_1": {
      "name": "Ring Radius 1",
      "description": "Anneau rayon 1 (sans centre)",
      "category": "area",
      "tiles": [[-1, -1], [-1, 0], [-1, 1], [0, -1], [0, 1], [1, -1], [1, 0], [1, 1]],
      "needs_los": false
    },
    "ring_1_center": {
      "name": "Ring Radius 1 + Center",
      "description": "Anneau rayon 1 avec centre",
      "category": "area",
      "tiles": [[-1, -1], [-1, 0], [-1, 1], [0, -1], [0, 0], [0, 1], [1, -1], [1, 0], [1, 1]],
      "needs_los": false
    },
    "ring_2": {
      "name": "Ring Radius 2",
      "description": "Anneau rayon 2 (sans centre)",
      "category": "area",
      "tiles": "ring",
      "radius": 2,
      "include_center": false,
      "needs_los": false
    },

    "cone_2x3": {
      "name": "Cone 2x3",
      "description": "Cone profondeur 2, largeur 3",
      "category": "special",
      "tiles": [[0, 0], [1, -1], [1, 0], [1, 1], [2, -1], [2, 0], [2, 1]],
      "needs_los": false
    },
    "cone_3x5": {
      "name": "Cone 3x5",
      "description": "Cone profondeur 3, largeur 5",
      "category": "special",
      "tiles": [[0, 0], [1, -1], [1, 0], [1, 1], [2, -2], [2, -1], [2, 0], [2, 1], [2, 2], [3, -2], [3, -1], [3, 0], [3, 1], [3, 2]],
      "needs_los": false
    },

    "adjacent_random_1": {
      "name": "Adjacent Random 1",
      "description": "Centre + 1 adjacent aleatoire",
      "category": "random",
      "tiles": "adjacent_random",
      "include_center": true,
      "random_adjacent": 1,
      "needs_los": false
    },
    "adjacent_random_2": {
      "name": "Adjacent Random 2",
      "description": "Centre + 2 adjacents aleatoires",
      "category": "random",
      "tiles": "adjacent_random",
      "include_center": true,
      "random_adjacent": 2,
      "needs_los": false
    },
    "adjacent_random_3": {
      "name": "Adjacent Random 3",
      "description": "Centre + 3 adjacents aleatoires",
      "category": "random",
      "tiles": "adjacent_random",
      "include_center": true,
      "random_adjacent": 3,
      "needs_los": false
    },

    "row_4": {
      "name": "Row 4",
      "description": "4 cases horizontales centrees",
      "category": "line",
      "tiles": [[0, -2], [0, -1], [0, 0], [0, 1]],
      "needs_los": false
    },

    "pierce_column": {
      "name": "Pierce Column",
      "description": "Traverse toute la colonne avec degats reduits",
      "category": "special",
      "tiles": "column",
      "pierce": true,
      "pierce_falloff": 0.4,
      "needs_los": true
    }
  },

  "categories": {
    "basic": { "name": "Basique", "color": "#71717a" },
    "line": { "name": "Ligne", "color": "#38bdf8" },
    "area": { "name": "Zone", "color": "#fb923c" },
    "special": { "name": "Special", "color": "#a78bfa" },
    "diagonal": { "name": "Diagonal", "color": "#f472b6" },
    "chain": { "name": "Chain", "color": "#34d399" },
    "random": { "name": "Random", "color": "#fbbf24" },
    "positional": { "name": "Positionnel", "color": "#f87171" }
  },

  "balance_guidelines": {
    "by_tile_count": {
      "1": { "mp_cost": "8-12", "power_ratio": "1.0-1.2", "cooldown": "3-5s" },
      "2-3": { "mp_cost": "12-16", "power_ratio": "0.8-1.0", "cooldown": "6-8s" },
      "4-6": { "mp_cost": "16-22", "power_ratio": "0.6-0.8", "cooldown": "10-14s" },
      "7-10": { "mp_cost": "22-28", "power_ratio": "0.5-0.7", "cooldown": "14-18s" },
      "11+": { "mp_cost": "28-35", "power_ratio": "0.4-0.6", "cooldown": "18-25s" }
    },
    "chain_scaling": {
      "bounce_1": "100%",
      "bounce_2": "85%",
      "bounce_3": "70%",
      "bounce_4": "55%"
    }
  }
}
