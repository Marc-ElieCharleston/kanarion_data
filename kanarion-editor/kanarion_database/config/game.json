{
  "_meta": {
    "name": "Kanarion Online",
    "version": "0.9",
    "last_updated": "2026-01-11",
    "description": "High-level game configuration and implementation status"
  },

  "high_concept": {
    "genre": ["2D", "Mobile", "MMORPG", "Grid Combat"],
    "pitch": "Mobile 2D MMO inspired by Canaan Online: fast farming, generated loot, builds via equipment + Koros, instanced grid combat (2x5).",
    "mvp_scope": "Zones 1-20, 6 classes, loot/gear/skills/status, gold shop. Light quests later."
  },

  "implementation_status": {
    "_comment": "MVP status as of 2026-01-11",
    "core": {
      "combat_system": "implemented",
      "skills_system": "implemented",
      "status_effects": "implemented",
      "inventory_equipment": "implemented",
      "save_load": "implemented",
      "passive_system": "implemented",
      "death_respawn": "implemented"
    },
    "ui": {
      "hud_manager": "implemented",
      "settings_screen": "implemented",
      "skill_bar_drag_drop": "implemented",
      "minimap": "implemented",
      "chat_panel": "implemented",
      "party_panel": "implemented"
    },
    "world": {
      "zone_manager": "implemented",
      "tutorial_manager": "implemented",
      "out_of_combat_regen": "implemented",
      "combat_joining": "implemented"
    },
    "network": {
      "multiplayer": "partial",
      "chat_system": "implemented"
    },
    "data_only": {
      "quests": "data_only",
      "keystones": "data_only",
      "shop_boutique": "data_only",
      "world_map": "data_only"
    }
  },

  "game_constants": {
    "max_level": 60,
    "max_party_size": 9,
    "max_raid_size": 19,
    "stat_points_per_level": 5,
    "skill_points_per_level": 1
  },

  "combat_grids": {
    "_comment": "Grilles de combat dynamiques - le format dépend du type de combat",
    "default": "3x4",
    "playtest_mode": true,
    "playtest_grids": ["3x4", "3x5", "4x4"],
    "available": {
      "3x4": {
        "rows": 3,
        "cols": 4,
        "total_slots": 12,
        "description": "Balanced grid (3 rows × 4 cols) - MVP default"
      },
      "3x5": {
        "rows": 3,
        "cols": 5,
        "total_slots": 15,
        "description": "Wide grid (3 rows × 5 cols)"
      },
      "4x4": {
        "rows": 4,
        "cols": 4,
        "total_slots": 16,
        "description": "Square grid for special encounters"
      },
      "2x5": {
        "rows": 2,
        "cols": 5,
        "total_slots": 10,
        "description": "Compact grid for tutorial/small encounters"
      }
    },
    "layout": {
      "_comment": "Isometric projection ~30° - Canaan Online style formations",
      "_formula": "anchor = team_center - ((cols-1)/2)*axis_col - ((rows-1)/2)*axis_row; pos = anchor + col*axis_col + row*axis_row",
      "axis_col": {"x": 55, "y": 28},
      "axis_row": {"x": -22, "y": -45},
      "team_center_player": {"x": -100, "y": 100},
      "team_center_enemy": {"x": 100, "y": -100}
    },
    "usage": {
      "open_world": "3x4",
      "dungeon": "4x4",
      "pvp_arena": "4x4",
      "boss_fight": "4x4",
      "tutorial": "2x5",
      "playtest": "random"
    },
    "notes": "playtest_mode=true: combat sélectionne aléatoirement parmi playtest_grids"
  },

  "chat_channels": {
    "world": {"id": 0, "prefix": "[W]", "color": "#E6E6D9", "commands": ["/world", "/1"]},
    "say": {"id": 1, "prefix": "[S]", "color": "#FFFFFF", "commands": ["/s", "/say"]},
    "party": {"id": 2, "prefix": "[P]", "color": "#66B3FF", "commands": ["/p", "/party"]},
    "guild": {"id": 3, "prefix": "[G]", "color": "#66E666", "commands": ["/g", "/guild"]},
    "whisper": {"id": 4, "prefix": "[MP]", "color": "#E680E6", "commands": ["/w", "/whisper"]},
    "sale": {"id": 5, "prefix": "[V]", "color": "#FF9933", "commands": ["/v", "/trade"]},
    "lfg": {"id": 6, "prefix": "[LFG]", "color": "#E6E666", "commands": ["/lfg"]}
  },

  "minimap": {
    "shape": "circle",
    "radius_pixels": 60,
    "world_radius": 300,
    "update_rate_hz": 10,
    "hidden_during_combat": true,
    "markers": {
      "player": {"shape": "triangle", "color": "cyan"},
      "monster": {"color": "red", "size": 4},
      "elite": {"color": "orange", "size": 5},
      "boss": {"color": "dark_orange", "size": 6},
      "npc": {"color": "yellow", "size": 4},
      "party": {"color": "green", "size": 4}
    }
  },

  "party_behavior": {
    "leader_controls_movement": true,
    "party_enters_together": true,
    "follow_distance": 40,
    "max_members_display": 6
  },

  "afk": {
    "warning_minutes": 30,
    "final_warning_minutes": 45,
    "disconnect_minutes": 60,
    "check_interval_seconds": 60
  },

  "chat": {
    "max_message_length": 200,
    "max_history_size": 100,
    "spam_cooldown_seconds": 2.0
  },

  "spawner": {
    "_comment": "Configuration du spawner de monstres",
    "star_roll_weights": [20.0, 20.0, 20.0, 15.0, 15.0, 10.0],
    "star_roll_weights_note": "Weights pour 0★ à 5★ (plus de high-star pour encourager le group play)",
    "respawn_time_min": 90.0,
    "respawn_time_max": 180.0,
    "max_active_monsters": 40,
    "lazy_load_distance": 600.0,
    "lazy_unload_distance": 800.0
  },

  "files_reference": {
    "_comment": "Detailed specs are split across these files",
    "combat_rules": "config/combat_config.json",
    "status_effects_rules": "config/status_effects_config.json",
    "classes": "classes/_classes_index.json",
    "monsters": "entities/monsters.json",
    "items": "items/*.json",
    "world": "world/*.json",
    "systems": "systems/*.json"
  }
}
