{
  "_meta": {
    "version": "3.1",
    "last_updated": "2026-01-20",
    "description": "Configuration des status effects - durees, stacking, balance"
  },

  "damage_types": {
    "_comment": "Types de degats simplifies - pas d'elements",
    "types": ["physical", "magical"],
    "physical": "Degats bases sur ATK, reduits par armor",
    "magical": "Degats bases sur MAG, reduits par magic_resist",
    "design_note": "Les visuels (feu, glace, ombre) sont cosmetiques uniquement, pas de mecanique rock-paper-scissors"
  },

  "stacking_system": {
    "_comment": "Systeme de stacking style gacha - chaque stack donne un bonus, max 10 stacks",
    "enabled": true,
    "value_per_stack": 10,
    "value_per_stack_comment": "Chaque stack donne +10% de l'effet de base",
    "max_stacks": 10,
    "max_total_bonus": 100,
    "max_total_bonus_comment": "10 stacks x 10% = +100% max",
    "formula": "final_value = base_value * (1 + (stacks * value_per_stack / 100))",
    "examples": {
      "1_stack": "base * 1.10 = +10%",
      "3_stacks": "base * 1.30 = +30%",
      "5_stacks": "base * 1.50 = +50%",
      "10_stacks": "base * 2.00 = +100% (cap)"
    },
    "skill_stack_grants": {
      "_comment": "Les skills peuvent donner plusieurs stacks d'un coup",
      "solo_skill_example": "Un buff personnel peut donner 4 stacks d'ATK_UP",
      "support_skill_example": "Un buff de groupe donne generalement 1-2 stacks par ally",
      "signature_skill_example": "Les skills signature peuvent donner 3-5 stacks"
    },
    "stacking_rules": {
      "same_source_same_effect": "Additionne les stacks jusqu'au max",
      "different_source_same_effect": "Additionne les stacks jusqu'au max (pas de source tracking)",
      "duration_on_new_stack": "Refresh la duree totale du buff/debuff",
      "duration_notes": "Chaque application refresh la duree, pas de tracking par stack"
    },
    "applies_to": [
      "atk_up", "atk_down", "def_up", "def_down", "mag_up", "mag_down",
      "crit_chance_up", "crit_chance_down", "crit_damage_up", "crit_damage_down",
      "armor_up", "armor_down", "magic_resist_up", "magic_resist_down",
      "hit_up", "hit_down", "flee_up", "flee_down",
      "damage_percent_up", "damage_percent_down",
      "damage_reduction_up", "damage_reduction_down",
      "heal_power_up", "heal_power_down",
      "atk_speed_up", "atk_speed_down", "cast_speed_up", "cast_speed_down",
      "regen", "mana_regen", "lifesteal", "thorns", "heal_reduction"
    ],
    "does_not_apply_to": {
      "_comment": "Ces effets utilisent refresh ou unique",
      "dots": ["burn", "poison", "bleed"],
      "control": ["stun", "silence", "root", "fear", "confusion", "blind"],
      "immunity": ["invulnerable", "untargetable", "cc_immune", "cc_immune_zone"],
      "special": ["shield", "evasion", "block", "parry", "reflect", "marked", "taunt", "heal_block", "shield_block"]
    }
  },

  "duration_balance": {
    "buff_durations": {
      "short": {"min": 3, "max": 5, "typical_use": "Combat opener"},
      "medium": {"min": 8, "max": 12, "typical_use": "Standard buff"},
      "long": {"min": 15, "max": 20, "typical_use": "Ultimate/signature"}
    },
    "debuff_durations": {
      "short": {"min": 2, "max": 4, "typical_use": "Basic CC"},
      "medium": {"min": 5, "max": 8, "typical_use": "Standard debuff"},
      "long": {"min": 10, "max": 15, "typical_use": "Strong debuff/DoT"}
    }
  },

  "dot_balance": {
    "tick_interval": 1.0,
    "max_stacks": {
      "poison": 5,
      "bleed": 3,
      "burn": 3
    },
    "damage_formula": {
      "poison": "2% max HP per tick per stack",
      "bleed": "ATK * 0.3 per tick per stack",
      "burn": "MAG * 0.25 per tick per stack"
    }
  },

  "diminishing_returns": {
    "_comment": "System anti-CC chain - prevents permastun",
    "enabled": true,
    "dr_window": 15.0,
    "dr_window_note": "Time window in seconds for tracking CC applications",
    "reduction_per_hit": 0.5,
    "reduction_per_hit_note": "Each subsequent CC = duration * this value",
    "max_hits": 3,
    "max_hits_note": "After this many CCs, become immune",
    "immunity_duration": 8.0,
    "immunity_duration_note": "Seconds of CC immunity after max DR reached",
    "applies_to": ["stun", "fear", "confusion"],
    "does_not_apply_to": ["silence", "root", "slow", "blind"]
  },

  "control_effects": {
    "stun": {
      "max_duration": 3,
      "diminishing_returns": true,
      "dr_formula": "each subsequent stun = duration * 0.5",
      "prevents": ["all_actions"],
      "allows": []
    },
    "silence": {
      "max_duration": 5,
      "diminishing_returns": false,
      "prevents": ["skills", "spells"],
      "allows": ["auto_attack", "movement", "items"]
    },
    "root": {
      "max_duration": 4,
      "diminishing_returns": false,
      "prevents": ["movement", "dash_skills"],
      "allows": ["skills", "auto_attack"]
    },
    "fear": {
      "max_duration": 3,
      "diminishing_returns": true,
      "dr_formula": "each subsequent fear = duration * 0.5",
      "effect": "random_movement + cannot_act"
    },
    "confusion": {
      "max_duration": 4,
      "diminishing_returns": true,
      "dr_formula": "each subsequent confusion = duration * 0.5",
      "effect": "can_attack_allies"
    },
    "blind": {
      "max_duration": 5,
      "diminishing_returns": false,
      "effect": "hit_rate_reduced_to_25%"
    },
    "disarm": {
      "max_duration": 4,
      "diminishing_returns": false,
      "prevents": ["auto_attack"],
      "allows": ["skills", "spells", "movement", "items"],
      "note": "Counter physical DPS, n'empeche pas les skills"
    }
  },

  "immunity_effects": {
    "_comment": "Buffs d'immunite - puissants, CD long",
    "evasion": {
      "effect": "Evite TOUTES les attaques",
      "typical_duration": {"min": 2, "max": 5},
      "cooldown_tier": "long",
      "note": "Buff PvP clutch, fenetre d'immunity"
    },
    "invulnerable": {
      "effect": "Immune a tous les degats",
      "typical_duration": {"min": 2, "max": 4},
      "cooldown_tier": "very_long",
      "note": "Ne peut pas agir pendant l'effet (optionnel)"
    },
    "untargetable": {
      "effect": "Ne peut pas etre cible directement",
      "typical_duration": {"min": 3, "max": 6},
      "cooldown_tier": "long",
      "note": "AOE peuvent toujours toucher"
    },
    "cc_immune": {
      "effect": "Immune a tous les CC (stun, silence, root, fear, confusion, blind)",
      "typical_duration": {"min": 5, "max": 10},
      "cooldown_tier": "medium",
      "note": "Buff personnel"
    },
    "cc_immune_zone": {
      "effect": "Zone: allies dans la zone immunises aux CC",
      "typical_duration": {"min": 4, "max": 8},
      "cooldown_tier": "long",
      "is_aura": true,
      "note": "Buff de zone, Healer/Support skill"
    }
  },

  "counter_effects": {
    "_comment": "Debuffs pour counter les builds tank/healer",
    "heal_reduction": {
      "base_reduction_percent": 50,
      "stacking": "stackable",
      "max_reduction_percent": 95,
      "formula": "healing_received = healing * max(0.05, 1 - 0.5 * stacks)",
      "duration": {"min": 5, "max": 8},
      "counters": ["full_heal_builds", "lifesteal_tanks"]
    },
    "heal_block": {
      "reduction_percent": 100,
      "stacking": "refresh",
      "duration": {"min": 2, "max": 4},
      "counters": ["emergency_heals", "healing_combos"],
      "notes": "Rare et puissant, PvP principalement"
    },
    "shield_block": {
      "effect": "prevents_new_shields",
      "stacking": "refresh",
      "duration": {"min": 5, "max": 8},
      "counters": ["guardian_shield_spam", "support_shields"],
      "notes": "N'affecte pas shields existants"
    }
  }
}
