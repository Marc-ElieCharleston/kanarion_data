{
  "_meta": {
    "version": "2.0",
    "last_updated": "2026-01-27",
    "description": "Systeme de ciblage: grille 2x5, patterns, et Line of Sight"
  },

  "grid": {
    "rows": 2,
    "cols": 5,
    "total_slots": 10,
    "max_players_per_team": 10,
    "description": "Deux grilles 2x5 separees qui se font face. Combat temps reel.",
    "layout": {
      "allies": "Grille 2x5 a gauche (slots 0-4 front, 5-9 back)",
      "enemies": "Grille 2x5 a droite",
      "facing": "Front rows se font face"
    },
    "coordinate_system": {
      "format": "[row, col]",
      "row_0": "front",
      "row_1": "back",
      "col_range": "0 to 4"
    },
    "slot_mapping": {
      "front_row": [0, 1, 2, 3, 4],
      "back_row": [5, 6, 7, 8, 9],
      "by_slot": {
        "0": [0, 0], "1": [0, 1], "2": [0, 2], "3": [0, 3], "4": [0, 4],
        "5": [1, 0], "6": [1, 1], "7": [1, 2], "8": [1, 3], "9": [1, 4]
      }
    },
    "typical_positioning": {
      "front": "Tanks, melee DPS, bruisers",
      "back": "Healers, ranged DPS, mages, squishy casters"
    }
  },

  "combat_system": {
    "type": "real_time",
    "gcd": 2.0,
    "description": "Combat temps reel avec GCD de 2 secondes. Spells en drag-and-drop.",
    "targeting": {
      "method": "drag_and_drop",
      "click_select": true,
      "valid_targets_only": "Seules les cibles valides (selon LoS) sont cliquables"
    }
  },

  "line_of_sight": {
    "description": "Systeme de ligne de vue - check sur la grille ENNEMIE",
    "core_rule": "Une cible en back est bloquee si un ennemi est devant elle (meme colonne, front row)",
    "rules": {
      "auto_attack": {
        "needs_los": true,
        "description": "Auto-attacks bloquees si la cible a quelqu'un devant dans sa colonne"
      },
      "spells": {
        "default": false,
        "description": "Par defaut les spells ignorent LoS (needs_los sur le spell pour forcer)"
      }
    },
    "los_check": {
      "check_on": "target_grid",
      "description": "Pour cible en back row: check si front row meme colonne a une unite",
      "example": {
        "scenario": "Tu veux taper slot 7 (back row, col 2)",
        "check": "Slot 2 (front row, col 2) a une unite?",
        "result": "Si oui = slot 7 bloque pour auto-attack"
      }
    }
  },

  "patterns": {
    "_comment": "Patterns pour grille 2x5. Format: [row_offset, col_offset] depuis la cible",

    "single": {
      "name": "Single Target",
      "description": "Cible unique",
      "category": "basic",
      "tiles": [[0, 0]],
      "needs_los": true,
      "tile_count": 1
    },

    "row_3": {
      "name": "Row 3",
      "description": "3 cases horizontales centrees",
      "category": "line",
      "tiles": [[0, -1], [0, 0], [0, 1]],
      "needs_los": false,
      "tile_count": 3
    },
    "row_5": {
      "name": "Row Full",
      "description": "Ligne complete (5 cases)",
      "category": "line",
      "tiles": [[0, -2], [0, -1], [0, 0], [0, 1], [0, 2]],
      "needs_los": false,
      "tile_count": 5
    },

    "col_2": {
      "name": "Column Full",
      "description": "Colonne complete (2 cases: front + back)",
      "category": "line",
      "tiles": [[0, 0], [1, 0]],
      "needs_los": false,
      "tile_count": 2
    },

    "adjacent": {
      "name": "Adjacent",
      "description": "Cible + 4 adjacents (croix)",
      "category": "area",
      "tiles": [[0, 0], [0, -1], [0, 1], [1, 0], [-1, 0]],
      "needs_los": false,
      "tile_count": 5,
      "note": "Row offset -1 ou +1 peut sortir de grille (ignore)"
    },

    "rect_2x3": {
      "name": "Rect 2x3",
      "description": "Rectangle 2 rows x 3 cols",
      "category": "area",
      "tiles": [[0, -1], [0, 0], [0, 1], [1, -1], [1, 0], [1, 1]],
      "needs_los": false,
      "tile_count": 6
    },
    "rect_2x5": {
      "name": "Full Grid",
      "description": "Grille complete (2x5 = 10 cases)",
      "category": "area",
      "tiles": [
        [0, -2], [0, -1], [0, 0], [0, 1], [0, 2],
        [1, -2], [1, -1], [1, 0], [1, 1], [1, 2]
      ],
      "needs_los": false,
      "tile_count": 10
    },

    "chain_2": {
      "name": "Chain 2",
      "description": "Rebondit sur 2 cibles adjacentes",
      "category": "chain",
      "tiles": "dynamic",
      "needs_los": true,
      "bounces": 2,
      "bounce_damage_reduction": 0.15,
      "tile_count": 3
    },
    "chain_3": {
      "name": "Chain 3",
      "description": "Rebondit sur 3 cibles adjacentes",
      "category": "chain",
      "tiles": "dynamic",
      "needs_los": true,
      "bounces": 3,
      "bounce_damage_reduction": 0.15,
      "tile_count": 4
    },

    "random_2": {
      "name": "Random 2",
      "description": "2 cibles aleatoires",
      "category": "random",
      "tiles": "dynamic",
      "needs_los": false,
      "random_targets": 2,
      "can_hit_same_target": false,
      "tile_count": 2
    },
    "random_3": {
      "name": "Random 3",
      "description": "3 cibles aleatoires",
      "category": "random",
      "tiles": "dynamic",
      "needs_los": false,
      "random_targets": 3,
      "can_hit_same_target": false,
      "tile_count": 3
    },

    "all": {
      "name": "All",
      "description": "Toutes les cibles (10 cases)",
      "category": "basic",
      "tiles": "all",
      "needs_los": false,
      "tile_count": 10
    },

    "front_row": {
      "name": "Front Row",
      "description": "Ligne front ennemie (5 cases)",
      "category": "positional",
      "tiles": [[0, -2], [0, -1], [0, 0], [0, 1], [0, 2]],
      "needs_los": false,
      "fixed_row": 0,
      "tile_count": 5
    },
    "back_row": {
      "name": "Back Row",
      "description": "Ligne back ennemie (5 cases)",
      "category": "positional",
      "tiles": [[1, -2], [1, -1], [1, 0], [1, 1], [1, 2]],
      "needs_los": false,
      "fixed_row": 1,
      "tile_count": 5
    }
  },

  "categories": {
    "basic": {
      "name": "Basique",
      "description": "Single target et full grid",
      "color": "#71717a"
    },
    "line": {
      "name": "Ligne",
      "description": "Patterns lineaires (row/col)",
      "color": "#38bdf8"
    },
    "area": {
      "name": "Zone",
      "description": "Rectangles",
      "color": "#fb923c"
    },
    "chain": {
      "name": "Chain",
      "description": "Rebondissent entre cibles",
      "color": "#34d399"
    },
    "random": {
      "name": "Random",
      "description": "Cibles aleatoires",
      "color": "#fbbf24"
    },
    "positional": {
      "name": "Positionnel",
      "description": "Ciblent des lignes fixes",
      "color": "#f87171"
    }
  },

  "balance_guidelines": {
    "description": "Guidelines pour equilibrer les skills selon leur pattern",
    "by_tile_count": {
      "1": { "mp_cost": "8-12", "power_ratio": "1.0-1.2", "cooldown": "3-5s" },
      "2-3": { "mp_cost": "12-16", "power_ratio": "0.8-1.0", "cooldown": "6-8s" },
      "4-6": { "mp_cost": "16-22", "power_ratio": "0.6-0.8", "cooldown": "10-14s" },
      "7-10": { "mp_cost": "22-30", "power_ratio": "0.5-0.7", "cooldown": "14-20s" }
    },
    "los_bonus": {
      "description": "Skills avec needs_los=true peuvent avoir +10% power car plus restrictifs",
      "power_bonus": "+10%"
    },
    "chain_scaling": {
      "description": "Chaque bounce fait moins de degats",
      "bounce_1": "100%",
      "bounce_2": "85%",
      "bounce_3": "70%"
    }
  }
}
